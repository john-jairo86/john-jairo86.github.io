<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Fieldset con búsqueda</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="p-4">

    <!-- BOTÓN -->
    <button class="btn btn-dark" type="button" id="btnToggle">
        Seleccione...
    </button>

    <!-- FIELDSET DROPDOWN -->
    <fieldset id="fielDrop" hidden class="border p-2 mt-2">

        <!-- Buscador -->
        <input type="text" class="form-control mb-2" id="searchInput" placeholder="Buscar...">

        <!-- Opciones -->
        <ul id="optionsList" class="list-group">

            <li class="list-group-item" data-value="router">Routereeeeeeeeeeeeeeeeeeeeeeeeeeeeee qqqqqqqqqq ww        sadfasdfadsfdsfasdfasdf uuuuuuuuuuuuuuuuuuuuuuuu uuuuuuuuuuuuuuu uuuuuuuuuRoutereeeeeeeeeeeeeeeeeeeeeeeeeeeeee qqqqqqqqqq ww        sadfasdfadsfdsfasdfasdf uuuuuuuuuuuuuuuuuuuuuuuu uuuuuuuuuuuuuuu uuuuuuuuu</li>
            <li class="list-group-item" data-value="switch">Switch</li>
            <li class="list-group-item" data-value="onu">ONU</li>
            <li class="list-group-item" data-value="antena">Antena</li>
            <li class="list-group-item" data-value="servidor">Servidor</li>
            <li class="list-group-item" data-value="cable">Cable</li>

        </ul>
    </fieldset>

    <!-- Valor oculto -->
    <input type="hidden" id="selectedValue">

    <script>
        const btn = document.getElementById("btnToggle");
        const fieldset = document.getElementById("fielDrop");
        const search = document.getElementById("searchInput");
        const items = document.querySelectorAll("#optionsList li");
        const hiddenValue = document.getElementById("selectedValue");

        // Mostrar / ocultar fieldset
        btn.addEventListener("click", () => {
            fieldset.hidden = !fieldset.hidden;
            if (!fieldset.hidden) search.focus();
        });

        // Filtrar opciones
        search.addEventListener("keyup", () => {
            const filter = search.value.toLowerCase();
            items.forEach(item => {
                const text = item.textContent.toLowerCase();
                item.style.display = text.includes(filter) ? "" : "none";
            });
        });

        // Seleccionar opción
        items.forEach(item => {
            item.addEventListener("click", () => {
                btn.textContent = item.textContent;         // mostrar selección
                hiddenValue.value = item.dataset.value;     // guardar valor
                fieldset.hidden = true;                     // cerrar fieldset
            });
        });

        // Cerrar al hacer clic afuera
        document.addEventListener("click", (e) => {
            if (!fieldset.contains(e.target) && e.target !== btn) {
                fieldset.hidden = true;
            }
        });
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>
